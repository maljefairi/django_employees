{% load static %}
<!DOCTYPE html>
<html>
<head>
  <title>Employee Management</title>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <style>
    .custom-container {
      margin-left: auto;
      margin-right: auto;
      max-width: 85%;
    }
  </style>
</head>
<body>
  <div class="container mt-3 custom-container">
    <h2 class="text-secondary text-center p-2" style="background-color:#e9ecef">Employee Management</h2>
    <hr>
    <div class="row mb-4">
      <div class="col-md-6">
        <form method="POST" action="" id="search-form">
          {% csrf_token %}
          <label class="text-primary">- Search by target: </label>

          <div class="form-row">
            <div class="col">
              <input type="text" class="form-control" name="job_number" placeholder="job-Number" value="{{ request.POST.job_number }}">
            </div>
            <div class="col">
              <input type="text" class="form-control" name="name" placeholder="Name" value="{{ request.POST.name }}">
            </div>
            <div class="col">
              <input type="text" class="form-control" name="nationality" placeholder="Nationality" value="{{ request.POST.nationality }}">
            </div>
            <div class="col">
              <input type="text" class="form-control" name="job_title" placeholder="Job Title" value="{{ request.POST.job_title }}">
            </div>
          </div>
          <div class="form-row">

            <div class="col mt-3">
              <label class="text-primary">- Search by keyword: </label>
              <input type="text" class="form-control" name="keyword" placeholder="keyword" value="{{ request.POST.keyword }}">
            </div>
          </div>
            <div class="col-auto mt-2">
              <button type="submit" class="btn btn-primary">Search</button>
              <button type="button" class="btn btn-secondary" id="reset-button">Reset</button>
            </div>
        </form>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <div class="table-responsive table-sm">
          <table class="table table-striped">
            <thead>
              <tr>
                <th>Job Number</th>
                <th>Name</th>
                <th>Personal Number</th>
                <th>Nationality</th>
                <th>Job Title</th>
                <th>Department</th>
                <th>Administration</th>
                <th>Qualification</th>
                <th>Major</th>
                <th>Degree</th>
                <th>Job Description</th>
                <th>Job Duties</th>
                <th>Job Objectives</th>
                <th>Suggested Training</th>
              </tr>
            </thead>
            <tbody>
              {% for employee in employees %}
              <tr>
                <td>{{ employee.job_number }}</td>
                <td>{{ employee.name }}</td>
                <td>{{ employee.personal_number }}</td>
                <td>{{ employee.nationality }}</td>
                <td>{{ employee.job_title }}</td>
                <td>{{ employee.department }}</td>
                <td>{{ employee.administration }}</td>
                <td>{{ employee.qualification }}</td>
                <td>{{ employee.major }}</td>
                <td>{{ employee.degree }}</td>

                <td>{{ employee.job_description }}</td>
                <td>{{ employee.job_duties }}</td>
                <td>{{ employee.job_objectives }}</td>
                <td>{{ employee.suggested_training }}</td>
              </tr>
              {% empty %}
              <tr>
                <td colspan="15">No employees found.</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
          
      </div>
      </div>
    </div>
  </div>

  <script src="{% static 'utils.js' %}"></script>
  <script>
    document.getElementById('reset-button').addEventListener('click', function() {
      var form = document.getElementById('search-form');
      var inputs = form.getElementsByTagName('input');
  
      // Clearing the input values, but preserve CSRF token
      for(var i = 0; i < inputs.length; i++) {
          if (inputs[i].name !== 'csrfmiddlewaretoken') {
              inputs[i].value = "";
          }
      }
      // Submit the form
      form.submit();
    });
  </script>
  
</body>
</html>
