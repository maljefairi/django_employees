{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Job Descriptions Management</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .custom-container {
            margin-left: auto;
            margin-right: auto;
            max-width: 85%;
        }
    </style>
</head>
<body>
    <div class="container mt-3 custom-container">
        <h2 class="text-secondary text-center p-2" style="background-color:#e9ecef">Job Descriptions Management</h2>
        <hr>
        <div class="row mb-4">
            <div class="col-md-12">
                <form method="POST" action="" id="search-form">
                    {% csrf_token %}
                    <div class="form-row">
                        <div class="col">
                            <input type="text" class="form-control" name="title" placeholder="Job Title" value="{{ request.POST.title }}">
                        </div>
                        <div class="col">
                            <input type="text" class="form-control" name="grade" placeholder="Grade" value="{{ request.POST.grade }}">
                        </div>
                        <div class="col">
                            <input type="text" class="form-control" name="group_type" placeholder="Group Type" value="{{ request.POST.group_type }}">
                        </div>
                        <!-- Add more fields here based on your model -->
                    </div>
                    <div class="col-auto mt-2">
                        <button type="submit" class="btn btn-primary">Search</button>
                        <button type="button" class="btn btn-secondary" id="reset-button">Reset</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="table-responsive table-sm">
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <!-- All the table headers here, based on your model fields -->
                                <th>Job Title</th>
                                <th>Grade</th>
                                <th>Code</th>
                                <!-- Add more headers based on your model -->
                            </tr>
                        </thead>
                        <tbody>
                            {% for description in job_descriptions %}
                            <tr>
                                <!-- All the table data here, based on your model fields -->
                                <td>{{ description.job_title.title }}</td>
                                <td>{{ description.grade }}</td>
                                <td>{{ description.code }}</td>
                                <!-- Add more data based on your model -->
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="15">No job descriptions found.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <script src="{% static 'utils.js' %}"></script>
    <script>
        document.getElementById('reset-button').addEventListener('click', function() {
            var form = document.getElementById('search-form');
            var inputs = form.getElementsByTagName('input');
    
            for(var i = 0; i < inputs.length; i++) {
                if (inputs[i].name !== 'csrfmiddlewaretoken') {
                    inputs[i].value = "";
                }
            }
            form.submit();
        });
    </script>
</body>
</html>
